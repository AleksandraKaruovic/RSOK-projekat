import{n as D,r as _,g as a,o as s,a as o,h as p,u as l,i as w,d as v,k as b,w as d,e as n,F as h,j as L,t as x,c as T,W as y}from"./app-BwGf_VIS.js";import{m as F}from"./md5-BTY1663T.js";import{_ as k}from"./PrimaryButton-CyZmB7vp.js";import{_ as A}from"./DeleteButton-DascRyov.js";import"./index-Cx6051RW.js";const I={class:"mt-10 space-y-5"},U={key:0,class:"mb-4"},W={key:1,class:"text-gray-500 dark:text-gray-400"},j={class:"flex items-start space-x-3"},M=["src"],P={class:"text-sm text-gray-500 dark:text-gray-400"},R={key:0,class:"italic text-gray-400 pt-3 pb-3"},q={key:1},z={class:"mt-2 space-x-2"},G={key:2},H={class:"mt-1 text-gray-800 dark:text-gray-100 pb-3 pt-3"},Y={__name:"CompanyComments",props:{comments:Array,companyId:Number},setup(f){const $=f,i=D().props.auth.user,u=_(""),g=_(null),m=_("");function S(){u.value.trim()&&y.post("/comments",{company_id:$.companyId,comment:u.value},{preserveScroll:!0,replace:!0,onFinish:()=>{u.value=""}})}const N=r=>{g.value=r.id,m.value=r.comment},C=()=>{g.value=null,m.value=""},V=r=>{y.put(`/comments/${r}`,{comment:m.value},{preserveScroll:!0,onSuccess:()=>{C()}})};function E(r){confirm("Are you sure you want to delete this comment?")&&y.delete(`/comments/${r}`,{preserveScroll:!0})}function B(r){y.patch(`/comments/${r}/restore`,{},{preserveScroll:!0})}return(r,e)=>(s(),a("div",I,[e[8]||(e[8]=o("h3",{class:"text-lg font-semibold"},"Comments",-1)),l(i)?(s(),a("div",U,[w(o("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),rows:"3",placeholder:"Leave a comment...",class:"w-full border rounded p-2 dark:bg-gray-700 dark:text-white"},null,512),[[b,u.value]]),v(k,{onClick:S},{default:d(()=>e[2]||(e[2]=[n(" Post ")])),_:1})])):p("",!0),f.comments.length===0?(s(),a("div",W," No comments yet. ")):p("",!0),(s(!0),a(h,null,L(f.comments,t=>(s(),a("div",{key:t.id,class:"border border-gray-300 dark:border-gray-700 rounded-lg p-4 mb-4 shadow-sm bg-white dark:bg-gray-800"},[o("div",j,[o("img",{src:`https://www.gravatar.com/avatar/${l(F)(t.user.email.trim().toLowerCase())}?s=40&d=identicon`,alt:"avatar",class:"w-5 h-5 rounded-full"},null,8,M),o("p",P,x(t.user.email)+" Â· "+x(new Date(t.created_at).toLocaleString()),1)]),t.deleted_at?(s(),a("div",R," This comment was deleted. ")):p("",!0),g.value===t.id?(s(),a("div",q,[w(o("textarea",{"onUpdate:modelValue":e[1]||(e[1]=c=>m.value=c),rows:"3",class:"w-full border rounded p-2 dark:bg-gray-700 dark:text-white"},null,512),[[b,m.value]]),o("div",z,[v(k,{onClick:c=>V(t.id)},{default:d(()=>e[3]||(e[3]=[n("Save")])),_:2},1032,["onClick"]),v(k,{onClick:C},{default:d(()=>e[4]||(e[4]=[n("Cancel")])),_:1})])])):(s(),a("div",G,[o("p",H,x(t.comment),1),!t.deleted_at&&l(i)&&t.user_id===l(i).id?(s(),a(h,{key:0},[v(k,{onClick:c=>N(t)},{default:d(()=>e[5]||(e[5]=[n(" Edit ")])),_:2},1032,["onClick"]),v(A,{onClick:c=>E(t.id)},{default:d(()=>e[6]||(e[6]=[n(" Delete ")])),_:2},1032,["onClick"])],64)):p("",!0),l(i)&&t.user_id===l(i).id&&t.deleted_at?(s(),T(k,{key:1,onClick:c=>B(t.id)},{default:d(()=>e[7]||(e[7]=[n(" Restore ")])),_:2},1032,["onClick"])):p("",!0)]))]))),128))]))}};export{Y as default};
