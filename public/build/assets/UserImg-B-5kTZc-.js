import{n as m,r as l,g as v,o as h,a as e,t as i,u as c,W as u}from"./app-BwGf_VIS.js";import{m as _}from"./md5-BTY1663T.js";const y={class:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow flex items-center space-x-6"},w=["src"],x={class:"text-2xl font-bold text-gray-900 dark:text-white"},b={class:"text-gray-600 dark:text-gray-300"},D={__name:"UserImg",setup(k){const r=m().props.auth.user,o=l(null),d=`https://www.gravatar.com/avatar/${_(r.email.trim().toLowerCase()).toString()}?s=160&d=identicon`,s=l(r.avatar_url||d);function p(){var a;(a=o.value)==null||a.click()}function f(a){const t=a.target.files[0];if(!t)return;s.value=URL.createObjectURL(t);const n=new FormData;n.append("avatar",t),u.post("/user/avatar",n,{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{confirm("Avatar updated successfully!"),u.reload({only:["auth"]})},onError:g=>{console.error("Upload failed:",g)}})}return(a,t)=>(h(),v("div",y,[e("div",{onClick:p,class:"cursor-pointer relative w-20 h-20 rounded-full overflow-hidden"},[e("img",{src:s.value,alt:"User Avatar",class:"w-20 h-20 object-cover",title:"Click to change avatar"},null,8,w),t[0]||(t[0]=e("div",{class:"absolute inset-0 bg-black bg-opacity-25 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity text-white font-semibold"}," Change ",-1))]),e("input",{ref_key:"fileInput",ref:o,type:"file",accept:"image/*",class:"hidden",onChange:f},null,544),e("div",null,[e("h3",x,i(c(r).name),1),e("p",b,i(c(r).email),1)])]))}};export{D as default};
